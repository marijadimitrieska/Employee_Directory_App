@model object

@{
    ViewData["Title"] = "ReadEmployees";
}

<h1>Index</h1>

<p>
    <a asp-action="Create" class="k-button k-button-md k-rounded-md k-button-solid">Create New</a>
</p>

@(Html.Kendo().Grid<Employee_Directory_App.Models.Employee>()
    .Name("grid")
    .Columns(columns=>{
        columns.Bound(p=>p.FirstName);
        columns.Bound(p=>p.LastName);
        columns.Bound(p=>p.Email);
        columns.Bound(p=>p.PhoneNumber);
        columns.Bound(p=>p.HireDate).Format("{0:dd.MM.yyyy}");
        columns.Bound(p=>p.Department.Name).Title("Department");
        columns.Bound(p=>p.JobTitle.Title).Title("Job Title");
        columns.Bound(p=>p.ProfilePhoto);
        columns.Bound(p=>p.IsActive);

        columns.Command(command =>{
            command.Edit().Text("Edit");
            command.Custom("Details").Click("detailsClick").Text("Details");
            command.Destroy().Text("Delete");
        }).Title("Actions");
    })
    .Pageable()
    .Sortable()
    .Scrollable()
    .Groupable()
    .Filterable()
    .Editable(editable => editable.Mode(GridEditMode.PopUp))
    .DataSource(dataSource => dataSource
            .Ajax()
            .PageSize(20)
            .Model(model => 
            {
                model.Id(e=>e.Id);
                model.Field(e=>e.FirstName);
                model.Field(e=>e.LastName);
            })
            .Read(read => read.Action("Index", "Employees"))
            .Update(update => update.Action("Edit", "Employees"))
            .Destroy(destroy => destroy.Action("Delete", "Employees"))
            .Create(create => create.Action("Create", "Employees"))
    )
)

<script>
    function detailsClick(e)
    {
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        window.location.href = '/Employees/Details/' + dataItem.Id;
    }
</script>